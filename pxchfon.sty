
%% This is file 'pxchfon.sty'.
%% 
%% Copyright (c) 2017 Takayuki YATO (aka. "ZR")
%%   GitHub:   https://github.com/zr-tex8r
%%   Twitter:  @zr_tex8r
%%
%% This package is distributed under the MIT License.
%%

%% package declaration
\NeedsTeXFormat{pLaTeX2e}
\ProvidesPackage{pxchfon}[2017/07/04 v1.0c]
\def\pxcz@pkgname{pxchfon}

%% preparations
\def\pxcz@error{\PackageError\pxcz@pkgname}
\def\pxcz@warn{\PackageWarning\pxcz@pkgname}
\def\pxcz@info{\PackageInfo\pxcz@pkgname}

%--------------------------------------- general

%% variables
\newif\ifpxcz@ok
\newif\ifpxcz@utf
\let\pxcz@pre\relax
\let\pxcz@post\relax

%% unique tokens
\def\pxcz@end{\pxcz@end@}
\def\pxcz@mt{\pxcz@mt@}

%% \pxcz@csletcs{<cs1>}{<cs2>}
\def\pxcz@csletcs#1#2{%
  \expandafter\let\csname#1\expandafter\endcsname\csname#2\endcsname}

%% \pxcz@lower\CS
\def\pxcz@lower#1{%
  \expandafter\pxcz@lower@a#1\pxcz@end#1}
\def\pxcz@lower@a#1\pxcz@end#2{%
  \lowercase{\def#2{#1}}}

%% \pxcz@split{<at>}{<target>}
\def\pxcz@split#1#2{%
  \edef\pxcz@tmpx{{#1}{#2}}%
  \expandafter\pxcz@split@a\pxcz@tmpx}
\def\pxcz@split@a#1#2{%
  \def\pxcz@tmpx##1#1##2\pxcz@end{\pxcz@split@b{##1}{##2}}%
  \pxcz@tmpx#2\pxcz@mt#1\pxcz@end}
\def\pxcz@split@b#1#2{%
  \let\pxcz@pre\relax \let\pxcz@post\relax
  \ifx\pxcz@end#2\pxcz@end\else
    \pxcz@split@c#2\pxcz@end{#1}%
  \fi}
\def\pxcz@split@c#1\pxcz@mt#2\pxcz@end#3{%
  \def\pxcz@pre{#3}\def\pxcz@post{#1}}

%--------------------------------------- environment check

%% check for 'pxjafont' package
% if old version of pxjafont is loaded (probably this package is
% required from pxjafont), then I abort here with an error message
% and in addition cause pxjafont to abort immediately.
\@ifpackageloaded{pxjafont}{%
  \ifx\pxAliasedPxjafont\@undefined
    \pxcz@error{Package 'pxjafont' is of incompatible version}%
    {You must use version 0.5 of pxjafont.}%
    \DeclareOption{noalphabet}{}\ProcessOptions
    \let\pxjf@main@preset\relax % make pxjafont bombout
  \endinput\fi}{}

%% \ifpxcz@uptex
\newif\ifpxcz@uptex \pxcz@uptexfalse
\edef\pxcz@tmpa{\string\ucs}\edef\pxcz@tmpb{\meaning\ucs}
\ifx\pxcz@tmpa\pxcz@tmpb \pxcz@uptextrue \fi

%% \ifpxcz@otf@deluxe
\newif\ifpxcz@otf@deluxe \pxcz@otf@deluxefalse
\@ifpackagewith{otf}{deluxe}{\pxcz@otf@deluxetrue}{}
\@ifpackagewith{pxotf}{deluxe}{\pxcz@otf@deluxetrue}{}

%% \ifpxcz@otf@multi
\newif\ifpxcz@otf@multi \pxcz@otf@multifalse
\@ifpackagewith{otf}{multi}{\pxcz@otf@multitrue}{}

%--------------------------------------- handle options

%% variables
\newif\ifpxcz@enabled \pxcz@enabledtrue
\let\pxcz@alphabet=n
\newif\ifpxcz@otf \pxcz@otftrue
\newif\ifpxcz@cmap@alpha
\newif\ifpxcz@mmivjis
\newif\ifpxcz@everypage
\newif\ifpxcz@oneweight
\newif\ifpxcz@uniquify
\let\pxcz@directunicode\relax
\let\pxcz@main@preset\relax
\let\pxcz@file@preset\relax
\newif\ifpxcz@file@preset@tl
\newif\ifpxcz@alpha
\newif\ifpxcz@rel
\newif\ifpxcz@dumpmap
\newif\ifpxcz@dumpmap@tl
\newif\ifpxcz@switch@font@mmivjis \pxcz@switch@font@mmivjistrue

%% process options
% drivers
\DeclareOption{nodvidriver}{\pxcz@enabledfalse}
\DeclareOption{dvips}{\pxcz@enabledfalse}
\DeclareOption{dviout}{\pxcz@enabledfalse}
\DeclareOption{xdvi}{\pxcz@enabledfalse}
\DeclareOption{dvipdfmx}{\pxcz@enabledtrue}
% (no)alphabet / relfont
\DeclareOption{alphabet}{\let\pxcz@alphabet=t}
\DeclareOption{noalphabet}{\let\pxcz@alphabet=f}
\DeclareOption{relfont}{\let\pxcz@alphabet=r}
% (no)otf
\DeclareOption{otf}{\pxcz@otftrue}
\DeclareOption{nootf}{\pxcz@otffalse}
\DeclareOption{utf}{\pxcz@otftrue}
\DeclareOption{noutf}{\pxcz@otffalse}
% (no)usecmapforalphabet
\DeclareOption{usecmapforalphabet}{\pxcz@cmap@alphatrue}
\DeclareOption{nousecmapforalphabet}{\pxcz@cmap@alphafalse}
% (no)prefer2004jis / (no)jis2004
\DeclareOption{prefer2004jis}{\pxcz@mmivjistrue}
\DeclareOption{noprefer2004jis}{\pxcz@mmivjisfalse}
\DeclareOption{jis2004}{\pxcz@mmivjistrue}
\DeclareOption{nojis2004}{\pxcz@mmivjisfalse}
% (no)everypage
\DeclareOption{everypage}{\pxcz@everypagetrue}
\DeclareOption{noeverypage}{\pxcz@everypagefalse}
% (no)oneweight
\DeclareOption{oneweight}{\pxcz@oneweighttrue}
\DeclareOption{nooneweight}{\pxcz@oneweightfalse}
% (no)directunicode / directunicode*
\chardef\pxcz@directunicode@none=0
\chardef\pxcz@directunicode@otf=1
\chardef\pxcz@directunicode@all=2
\chardef\pxcz@directunicode@full=3
\let\pxcz@directunicode\pxcz@directunicode@none
\DeclareOption{directunicode*}{\let\pxcz@directunicode\pxcz@directunicode@all}
\DeclareOption{directunicode}{\let\pxcz@directunicode\pxcz@directunicode@otf}
\DeclareOption{nodirectunicode}{\let\pxcz@directunicode\pxcz@directunicode@none}
% (no)dumpmap
\DeclareOption{dumpmap}{\pxcz@dumpmaptrue}
\DeclareOption{nodumpmap}{\pxcz@dumpmapfalse}
% (no)dumpmaptl
\DeclareOption{dumpmaptl}{\pxcz@dumpmap@tltrue}
\DeclareOption{nodumpmaptl}{\pxcz@dumpmap@tlfalse}
% (no)switchfont2004jis
\DeclareOption{switchfont2004jis}{\pxcz@switch@font@mmivjistrue}
\DeclareOption{noswitchfont2004jis}{\pxcz@switch@font@mmivjisfalse}
% preset spec options
\def\pxcz@all@main@preset{%
  noembed,%
  %(uniweight)
  ms,ipa,ipaex,%
  %(multiweight)
  ms-hg,ipa-hg,ipaex-hg,moga-mobo,moga-mobo-ex,moga-maruberi,%
  kozuka-pro,kozuka-pr6,kozuka-pr6n,hiragino-pro,hiragino-pron,%
  hiragino-elcapitan-pro,hiragino-elcapitan-pron,%
  morisawa-pro,morisawa-pr6n,yu-win,yu-win10,yu-win10+,yu-osx,%
  sourcehan-otc,sourcehan,noto-otc,noto,%
  %(obsolete)
  ipa-otf,ipa-otf-dx,kozuka4,kozuka6,kozuka6n,hiragino,%
  %(alias)
  ms-dx,ipa-ttf,ipa-ttf-dx,ipav2,ipav2-dx,ipa-dx,hiragino-dx,%
  noEmbed,kozuka,hiragino-elcapitan,morisawa}
  % But note, 'hiragino' != 'hiragino-pro'
\def\pxcz@do#1{\DeclareOption{#1}{\def\pxcz@main@preset{#1}}}
\@for\pxcz@x:=\pxcz@all@main@preset\do{%
  \expandafter\pxcz@do\expandafter{\pxcz@x}}
% others
\def\pxcz@opt@@unicode{unicode}
\def\pxcz@opt@@unicodeS{unicode*}
\DeclareOption*{%
  \ifx\CurrentOption\pxcz@opt@@unicode
    \let\pxcz@directunicode\pxcz@directunicode@full
  \else\ifx\CurrentOption\pxcz@opt@@unicodeS
    \pxcz@uniquifytrue
    \let\pxcz@directunicode\pxcz@directunicode@full
  \else
    \pxcz@parse@opt\CurrentOption
    \ifpxcz@ok\else \@unknownoptionerror \fi
  \fi\fi}
\@onlypreamble\pxcz@parse@opt
\def\pxcz@parse@opt#1{%
  \expandafter\pxcz@parse@opt@a#1\@nnil}
\@onlypreamble\pxcz@parse@opt@a
\def\pxcz@parse@opt@a{%
  \futurelet\pxcz@tok\pxcz@parse@opt@b}
\@onlypreamble\pxcz@parse@opt@b
\def\pxcz@parse@opt@b{%
  \pxcz@okfalse
  \let\pxcz@tmpa\remove@to@nnil
  \ifx+\pxcz@tok
    \pxcz@file@preset@tltrue \let\pxcz@tmpa\pxcz@parse@opt@c
  \else\ifx*\pxcz@tok
    \pxcz@file@preset@tlfalse \let\pxcz@tmpa\pxcz@parse@opt@c
  \fi\fi \pxcz@tmpa}
\@onlypreamble\pxcz@parse@opt@c
\def\pxcz@parse@opt@c#1#2\@nnil{%
  \pxcz@oktrue
  \edef\pxcz@file@preset{#2}}
% dispatch
\ProcessOptions*
%% 'everypage' needs 'atbegshi' package
\ifpxcz@everypage
\RequirePackage{atbegshi}
\fi

%% set 'pxcz@alpha'
\@tempswafalse
\if\pxcz@main@preset\relax
  \if\pxcz@file@preset\relax \@tempswatrue \fi
\fi
\if      t\pxcz@alphabet \pxcz@alphatrue
\else\if f\pxcz@alphabet \pxcz@alphafalse
\else\if r\pxcz@alphabet \pxcz@alphafalse
\else\if@tempswa \pxcz@alphatrue
\else  \pxcz@alphafalse
\fi\fi\fi\fi
\ifpxcz@alpha
  \IfFileExists{pxchfon0.def}{\relax}{%
    \pxcz@error{Option 'alphabet' not available in Lite edition}%
    {You must install full edition of PXchfon bundle, or specify
    'noalphabet'\MessageBreak as package option.}%
  \pxcz@alphafalse}
\fi

%% set 'pxcz@rel'
\if r\pxcz@alphabet \pxcz@reltrue
\else \pxcz@relfalse
\fi
\ifpxcz@rel
  \IfFileExists{pxchfon0.def}{\relax}{%
    \pxcz@error{Option 'relfont' not available in Lite edition}%
    {You must install full edition of PXchfon bundle.}%
  \pxcz@relfalse}
\fi

%% \ifpxcz@alphafont
% Whether or not alphabet fonts are used.
\newif\ifpxcz@alphafont
\ifpxcz@alpha \pxcz@alphafonttrue
\else\ifpxcz@rel \pxcz@alphafonttrue
\else \pxcz@alphafontfalse
\fi\fi

%--------------------------------------- preset-triggered setup

%% \pxcz@if@main@preset{<name>}{<code>}
\@onlypreamble\pxcz@if@main@preset
\def\pxcz@if@main@preset#1{%
  \edef\pxcz@tmpa{#1}%
  \ifx\pxcz@main@preset\pxcz@tmpa \expandafter\@firstofone
  \else \expandafter\@gobble
  \fi}
%% setup
\def\pxcz@preset@setup@sourcehan{%
  \ifnum\pxcz@directunicode=\pxcz@directunicode@otf
  \else\ifnum\pxcz@directunicode=\pxcz@directunicode@all
  \else
    \let\pxcz@directunicode\pxcz@directunicode@full
    \pxcz@uniquifyfalse
  \fi\fi}
\pxcz@if@main@preset{sourcehan}{%
  \pxcz@preset@setup@sourcehan}
\pxcz@if@main@preset{sourcehan-otc}{%
  \pxcz@preset@setup@sourcehan}
\pxcz@if@main@preset{noto}{%
  \pxcz@preset@setup@sourcehan}
\pxcz@if@main@preset{noto-otc}{%
  \pxcz@preset@setup@sourcehan}
\pxcz@if@main@preset{yu-win10+}{%
  \let\pxcz@directunicode\pxcz@directunicode@full
  \pxcz@uniquifyfalse}

%--------------------------------------- user interface

%%<*> \setminchofont/\setgothicfont/etc.
\newcommand*\setminchofont{\pxcz@setfont{mnl,mnr,mnb}}
\newcommand*\setgothicfont{\pxcz@setfont{gtr,gtb,gtx,gtu}}
\newcommand*\setlightminchofont{\pxcz@setfont{mnl}}
\newcommand*\setmediumminchofont{\pxcz@setfont{mnr}}
\newcommand*\setboldminchofont{\pxcz@setfont{mnb}}
\newcommand*\setmediumgothicfont{\pxcz@setfont{gtr}}
\newcommand*\setboldgothicfont{\pxcz@setfont{gtb}}
\newcommand*\setxboldgothicfont{\pxcz@setfont{gtx}}
\newcommand*\setoneweightgothicfont{\pxcz@setfont{gtu}}
\newcommand*\setmarugothicfont{\pxcz@setfont{mgr}}
\newcommand*\setkoreanminchofont{\pxcz@setfont{kom}}
\newcommand*\setkoreangothicfont{\pxcz@setfont{kog}}
\newcommand*\setschineseminchofont{\pxcz@setfont{scm}}
\newcommand*\setschinesegothicfont{\pxcz@setfont{scg}}
\newcommand*\settchineseminchofont{\pxcz@setfont{tcm}}
\newcommand*\settchinesegothicfont{\pxcz@setfont{tcg}}
\@onlypreamble\pxcz@setfont
\def\pxcz@setfont#1{\@ifnextchar[%]
  {\pxcz@setfont@a{#1}}{\pxcz@setfont@a{#1}[]}}
\@onlypreamble\pxcz@setfont@a
\def\pxcz@setfont@a#1[#2]#3{%
  \@for\pxcz@x:={#1}\do{%
    \ifx @#2@\@namedef{pxcz@FS/\pxcz@x}{#3}%
    \else\@namedef{pxcz@FS/\pxcz@x}{:#2:#3}\fi}}
\@for\pxcz@x:={%
  mnl,mnr,mnb,gtr,gtb,gtx,gtu,mgr,%
  kom,kog,scm,scg,tcm,tcg%
}\do{\@namedef{pxcz@FS/\pxcz@x}{}}

%--------------------------------------- '\asUTF'
% NB. This feature is superseded by the \diruni command.
\ifpxcz@uptex

%%<*> \asUTF{<jachar>}
\AtBeginDocument{%
  \@ifpackageloaded{otf}{%
    \providecommand*\asUTF{\pxcz@asutf@a}%
  }{}%
}
\def\pxcz@asutf@a#1{%
  \kchardef\pxcz@tmpa=`#1\relax
  \expandafter\pxcz@asutf@b\meaning\pxcz@tmpa\relax
}
\def\pxcz@asutf@b#1"#2\relax{%
  \UTF{#2}%
}

\fi
%--------------------------------------- fontmap internals

%% \pxcz@noembed
% The value given to \set...font to mean 'no-embed'.
\def\pxcz@noembed{*}

%% \pxcz@cmap@directuni
% CMap symbol for "direct unicode".
\def\pxcz@cmap@directuni{unicode}

%% \pxcz@cmap@hwuni
% CMap name for halfwidth fonts.
\def\pxcz@cmap@hwuni{UniJIS-UCS2-HW-H}

%%<*> \usecmapforalphabet/\nousecmapforalphabet
\def\usecmapforalphabet{%
  \global\let\pxcz@cmap@uni\pxcz@cmap@hwuni}
\def\nousecmapforalphabet{%
  \global\let\pxcz@cmap@uni\pxcz@cmap@directuni}
\ifpxcz@cmap@alpha \usecmapforalphabet
\else \nousecmapforalphabet \fi

%% \pxcz@NEF/<sym>
\def\pxcz@do#1#2{%
  \def\pxcz@tmpb{#2}%
  \@for\pxcz@tmpa:=#1\do{%
    \expandafter\let\csname pxcz@NEF/\pxcz@tmpa\endcsname\pxcz@tmpb
  }%
}
\pxcz@do{mnl,mnr,mnb}{Ryumin-Light}
\pxcz@do{gtr,gtb,gtx,gtu,mgr}{GothicBBB-Medium}
\pxcz@do{kom}{HYSMyeongJo-Medium}
\pxcz@do{kog}{HYGoThic-Medium}
\pxcz@do{scm}{STSong-Light}
\pxcz@do{scg}{STHeiti-Regular}
\pxcz@do{tcm}{MSung-Light}
\pxcz@do{tcg}{MHei-Medium}

%%<+> \JaFontReplacementFor{<sym>}
\newcommand*\JaFontReplacementFor[1]{%
  \csname pxcz@FS/#1\endcsname}

%%<+> \JaFontReplacementHook{<code>}
\@onlypreamble\JaFontReplacementHook
\newcommand*\JaFontReplacementHook{%
  \g@addto@macro\pxcz@user@hook}
\let\pxcz@user@hook\@empty

%%<+> \JaFontUserDefinedMap
\@onlypreamble\JaFontUserDefinedMap
\newcommand*\JaFontUserDefinedMap{%
  \g@addto@macro\pxcz@user@map}
\let\pxcz@user@map\@empty
\@namedef{pxcz@FS/*}{\pxcz@empty}

%%<+> \usefontmapline{<map-line>}
\@onlypreamble\usefontmapline
\newcommand*\usefontmapline[1]{%
  \JaFontUserDefinedMap{\pxcz@addtospec@alt\pxcz@mapline{#1}}}

%%<+> \usefontmapfile{<map-file>}
\@onlypreamble\usefontmapfile
\newcommand*\usefontmapfile[1]{%
  \JaFontUserDefinedMap{\pxcz@addtospec@alt\pxcz@mapfile{#1}}}

%--------------------------------------- map entry handling

%%<*> \setnewglyphcmapprefix{<str>}
\def\pxcz@pfx@jis@dflt{2004-}
\def\pxcz@pfx@jis@star{JISX0213-2004-}
\@onlypreamble\setnewglyphcmapprefix
\newcommand*\setnewglyphcmapprefix{%
  \@ifstar{\pxcz@set@pfx@jis\pxcz@pfx@jis@star}%
   {\pxcz@set@pfx@jis}}
\def\pxcz@set@pfx@jis#1{%
  \edef\pxcz@pfx@jis{#1}}
\setnewglyphcmapprefix{\pxcz@pfx@jis@dflt}

%% variables
\let\pxcz@sym\relax
\let\pxcz@cmap\relax
\let\pxcz@font\relax
\let\pxcz@csi\relax
\let\pxcz@lopts\relax
\let\pxcz@mopts\relax
\newif\ifpxcz@switch@font@yuwinx

%% \pxcz@@jpXX
\edef\pxcz@@jpXX{%
  \ifpxcz@mmivjis jp04\else jp90\fi}
%% \pxcz@add@lopt
\@onlypreamble\pxcz@add@lopt
\def\pxcz@add@lopt#1{%
  \edef\pxcz@lopts{%
    \ifx\pxcz@lopts\@empty\else \pxcz@lopts:\fi#1}}
%% \pxcz@uniquify@lopts
\@onlypreamble\pxcz@uniquify@lopts
\def\pxcz@uniquify@lopts#1#2{%
  \pxcz@oktrue
  \def\pxcz@tmpb{jp90}\ifx\pxcz@tmpb\pxcz@lopts\pxcz@okfalse\fi
  \def\pxcz@tmpb{jp04}\ifx\pxcz@tmpb\pxcz@lopts\pxcz@okfalse\fi
  \ifx\@empty\pxcz@lopts\if t#1\pxcz@okfalse\fi\fi
  \ifpxcz@ok
    \edef\pxcz@lopts{#2}%
  \fi}

%% \pxcz@sidx
\@onlypreamble\pxcz@sidx
\def\pxcz@sidx#1#2{%
  \expandafter\pxcz@sidx@a#2\pxcz@end{#1}}
\def\pxcz@sidx@a:#1:#2\pxcz@end#3{:#3:#2}

%% \pxcz@is@jis@cmap
\@onlypreamble\pxcz@is@jis@cmap
\def\pxcz@is@jis@cmap{%
  \pxcz@okfalse
  \expandafter\pxcz@is@jis@cmap@a\pxcz@cmap\pxcz@end}
\def\pxcz@is@jis@cmap@a#1#2\pxcz@end{%
  \ifx\pxcz@mt#2\pxcz@mt \pxcz@oktrue \fi}

%% \pxcz@force@mmiv@cmap
\@onlypreamble\pxcz@force@mmiv@cmap
\def\pxcz@force@mmiv@cmap{%
  \pxcz@is@jis@cmap \ifpxcz@ok
    \edef\pxcz@cmap{\pxcz@pfx@jis\pxcz@cmap}%
  \else
    \pxcz@split{UniJIS-}\pxcz@cmap
    \ifx\pxcz@pre\relax\else
      \edef\pxcz@cmap{UniJIS2004-\pxcz@post}%
    \fi
  \fi}

%% \pxcz@force@xcjis@font
\@onlypreamble\pxcz@force@xcjis@font
\ifpxcz@switch@font@mmivjis
  \def\pxcz@force@xcjis@font{%
    \let\pxcz@tmpa\pxcz@font \pxcz@lower\pxcz@tmpa
    \pxcz@csletcs{pxcz@tmpa}{pxcz@S4/\pxcz@tmpa}%
    \ifx\pxcz@tmpa\relax\else
      \edef\pxcz@font{\pxcz@tmpa{\pxcz@font}}%
    \fi}
  \def\do#1{\@namedef{pxcz@S4/#1}}
  \do{:0:mogam.ttc}{\pxcz@sidx3}
  \do{:1:mogam.ttc}{\pxcz@sidx4}
  \do{:0:mogamb.ttc}{\pxcz@sidx3}
  \do{:1:mogamb.ttc}{\pxcz@sidx4}
  \do{:0:mogag.ttc}{\pxcz@sidx2}
  \do{:1:mogag.ttc}{\pxcz@sidx3}
  \do{:0:mogagb.ttc}{\pxcz@sidx2}
  \do{:1:mogagb.ttc}{\pxcz@sidx3}
  \do{:0:mobog.ttc}{\pxcz@sidx2}
  \do{:1:mobog.ttc}{\pxcz@sidx3}
  \do{:0:mobogb.ttc}{\pxcz@sidx2}
  \do{:1:mobogb.ttc}{\pxcz@sidx3}
\else
  \let\pxcz@force@xcjis@font\relax
\fi

%% \pxcz@inspect@font@type{<font>}
\@onlypreamble\pxcz@inspect@font@type
\def\pxcz@inspect@font@type#1{%
  \edef\pxcz@tmpb{?#1}\pxcz@lower\pxcz@tmpb
  \let\pxcz@font@type\@empty
  \pxcz@split{?sourcehan}{\pxcz@tmpb}%
  \ifx\pxcz@pre\relax\else \def\pxcz@font@type{sourcehan}\fi
  \pxcz@split{:sourcehan}{\pxcz@tmpb}%
  \ifx\pxcz@pre\relax\else \def\pxcz@font@type{sourcehanC}\fi
  \pxcz@split{?noto}{\pxcz@tmpb}%
  \ifx\pxcz@pre\relax\else \def\pxcz@font@type{noto}\fi
  \pxcz@split{:noto}{\pxcz@tmpb}%
  \ifx\pxcz@pre\relax\else \def\pxcz@font@type{notoC}\fi
  \ifpxcz@switch@font@yuwinx
    \pxcz@split{?yumin}{\pxcz@tmpb}%
    \ifx\pxcz@pre\relax\else \def\pxcz@font@type{yumin}\fi
    \pxcz@split{:yugoth}{\pxcz@tmpb}%
    \ifx\pxcz@pre\relax\else \def\pxcz@font@type{yugoth}\fi
  \fi}

%% \pxcz@switch@font@for@feature{<feature>}
\def\pxcz@switch@font@for@feature#1{%
  \pxcz@inspect@font@type\pxcz@font
  \pxcz@csletcs{pxcz@tmpb}{pxcz@switch@font@@\pxcz@font@type @#1}%
  \ifx\pxcz@tmpb\relax\else
    \edef\pxcz@font{\expandafter\pxcz@tmpb\pxcz@font}%
  \fi}
\def\pxcz@switch@font@@sourcehanC@fwid#1:0:{:2:}
\def\pxcz@switch@font@@sourcehanC@hwid#1:0:{:1:}
\def\pxcz@switch@font@@sourcehan@fwid#1-{#1SC-}
\def\pxcz@switch@font@@sourcehan@hwid#1-{#1K-}
\def\pxcz@switch@font@@notoC@fwid#1:0:{:2:}
\def\pxcz@switch@font@@notoC@hwid#1:0:{:1:}
\def\pxcz@switch@font@@noto@fwid#1jp{#1sc}
\def\pxcz@switch@font@@noto@hwid#1jp{#1kr}
\def\pxcz@switch@font@@yugoth@fwid#1:0:{:1:}
\def\pxcz@switch@font@@yumin@fwid#1.ttf{%
  \@nameuse{pxcz@YMG/#1.ttf}}
\def\do#1{\@namedef{pxcz@YMG/#1}}
\do{yuminl.ttf}{:1:YuGothL.ttc}
\do{yumin.ttf}{:1:YuGothR.ttc}
\do{yumindb.ttf}{:1:YuGothM.ttc}

%% \pxcz@declare@entry@modifier{<name>}
\@onlypreamble\pxcz@declare@entry@modifier
\def\pxcz@declare@entry@modifier#1{%
  \expandafter\@onlypreamble\csname pxcz@MEM/#1\endcsname
  \expandafter\def\csname pxcz@MEM/#1\endcsname}
%% entry modifiers
% Uni: Changes cmap to 'unicode' if directunicode.
\pxcz@declare@entry@modifier{Uni}{%
  \ifnum\pxcz@directunicode<\pxcz@directunicode@otf\else
    \ifx\pxcz@font\pxcz@noembed\else
      \let\pxcz@cmap\pxcz@cmap@directuni
    \fi
  \fi}
% Uni*: Changes cmap to 'unicode' if directunicode*.
\pxcz@declare@entry@modifier{Uni*}{%
  \ifnum\pxcz@directunicode<\pxcz@directunicode@all\else
    \ifx\pxcz@font\pxcz@noembed\else
      \let\pxcz@cmap\pxcz@cmap@directuni
    \fi
  \fi}
% Switch
\pxcz@declare@entry@modifier{Switch}{%
  \ifpxcz@mmivjis
    \pxcz@force@mmiv@cmap
  \else
    \pxcz@force@xcjis@font
  \fi
  \pxcz@add@lopt{\pxcz@@jpXX}}
% 04
\pxcz@declare@entry@modifier{04}{%
  \pxcz@add@lopt{jp04}}
% 90
\pxcz@declare@entry@modifier{90}{%
  \pxcz@force@xcjis@font
  \pxcz@add@lopt{jp90}}
% HWid
\pxcz@declare@entry@modifier{HWid}{%
  \ifx\pxcz@font\pxcz@noembed
    \let\pxcz@cmap\pxcz@cmap@hwuni
  \else
    \let\pxcz@cmap\pxcz@cmap@uni
    \pxcz@switch@font@for@feature{hwid}%
  \fi
  \pxcz@add@lopt{hwid}%
  \ifx\pxcz@sym\pxcz@sym@@mgr
    \let\pxcz@font\@empty
  \fi}
% FWid
\pxcz@declare@entry@modifier{FWid}{%
    \pxcz@switch@font@for@feature{fwid}%
  \pxcz@add@lopt{fwid}}
% AJ16/AK12/AG14/AC14
\pxcz@declare@entry@modifier{AJ16}{\def\pxcz@csi{AJ16}}
\pxcz@declare@entry@modifier{AK12}{\def\pxcz@csi{AK12}}
\pxcz@declare@entry@modifier{AG14}{\def\pxcz@csi{AG14}}
\pxcz@declare@entry@modifier{AC14}{\def\pxcz@csi{AC14}}
% V: Adds '-w 1' if cmap is 'unicode'.
\pxcz@declare@entry@modifier{V}{%
  \ifx\pxcz@cmap\pxcz@cmap@directuni
    \edef\pxcz@mopts{ -w 1\pxcz@mopts}%
  \fi}
% Fin: final step
\pxcz@declare@entry@modifier{Fin}{%
  \ifx\pxcz@csi\relax\else
    \edef\pxcz@mopts{/\pxcz@csi}%
  \fi}


%% \pxcz@spec
\let\pxcz@spec\@empty

%% \pxcz@addtospec{<id>}
\@onlypreamble\pxcz@addtospec
\def\pxcz@addtospec#1{%
  \begingroup
    \chardef\pxcz@entry@type\z@
    \let\Entry\pxcz@Entry
    \@nameuse{pxcz@ME/#1}%
  \endgroup}
%% \Entry{<sym>}{<tfm>}{<cmap>}{<modify>,...}
\@onlypreamble\pxcz@Entry
\def\pxcz@Entry#1#2#3#4{%
  \def\pxcz@sym{#1}\def\pxcz@cmap{#3}%
  \let\pxcz@csi\relax \let\pxcz@mopts\@empty \let\pxcz@lopts\@empty
  \edef\pxcz@font{\@nameuse{pxcz@FS/\pxcz@sym}}%
  \@for\pxcz@tmpx:=#4,Fin\do{%
    \ifx\pxcz@font\@empty\else
      \@nameuse{pxcz@MEM/\pxcz@tmpx}%
    \fi}%
  \ifx\pxcz@font\pxcz@noembed
    \edef\pxcz@font{!\@nameuse{pxcz@NEF/\pxcz@sym}}%
  \fi
  \ifnum\pxcz@directunicode<\pxcz@directunicode@full\else
    \ifx\pxcz@cmap\pxcz@cmap@directuni
      \ifpxcz@uniquify
        \pxcz@uniquify@lopts{t}{\pxcz@@jpXX}%
      \fi
      \ifx\pxcz@lopts\@empty\else
        \edef\pxcz@mopts{\pxcz@mopts\space -l \pxcz@lopts}%
      \fi
    \fi
  \fi
  \ifx\pxcz@font\@empty\else
    \xdef\pxcz@spec{\pxcz@spec\noexpand\special{%
      \pxcz@mapline{#2 \pxcz@cmap\space\pxcz@font\pxcz@mopts}}}%
  \fi}

%% \pxcz@check@entry
\@onlypreamble\pxcz@check@entry
\def\pxcz@sym@@mgr{mgr}
\def\pxcz@check@entry{%
  \pxcz@oktrue
  \ifnum\pxcz@entry@type=\@ne
    \ifx\pxcz@sym\pxcz@sym@@mgr
      \expandafter\ifx\csname pxcz@FS/gtr\endcsname\relax\else
        \pxcz@okfalse \fi
    \fi
  \fi}

%% \pxcz@do@file@preset
\@onlypreamble\pxcz@do@file@preset
\def\pxcz@do@file@preset{%
  \ifpxcz@file@preset@tl
    \pxcz@do@file@preset@a{ptex-}%
    \ifpxcz@uptex \pxcz@do@file@preset@a{uptex-}\fi
    \ifpxcz@otf
      \pxcz@do@file@preset@a{otf-}%
      \ifpxcz@uptex \pxcz@do@file@preset@a{otf-up-}\fi
    \fi
  \else
    \pxcz@do@file@preset@a{}%
  \fi}
\@onlypreamble\pxcz@do@file@preset@a
\def\pxcz@do@file@preset@a#1{%
  \pxcz@addtospec@alt\pxcz@mapfile{#1\pxcz@file@preset.map}}

%% \pxcz@addtospec@alt
\def\pxcz@addtospec@alt#1#2{%
  \xdef\pxcz@spec{\pxcz@spec\noexpand\special{#1{#2}}}}
\def\pxcz@mapfile#1{pdf:mapfile #1}
\def\pxcz@mapline#1{pdf:mapline #1}

%--------------------------------------- map entry definitions

%% \pxcz@mapentry{<id>}{<text>}
\def\pxcz@mapentry#1{%
  \expandafter\pxcz@mapentry@a\csname pxcz@ME/#1\endcsname}
\def\pxcz@mapentry@a#1{\@onlypreamble#1\def#1}

%% map entries
% \FONT: file name for the 2004JIS font
% \FONTo: file name for the 90JIS font
% \FONTs: \FONT if prefer2004jis, \FONTo otherwise
% \*H: 2004-H if prefer2004jis, H otherwise
% \UniJIS: UniJIS2004 if prefer2004jis, UniJIS otherwise
% \+Uni...-H: replaced by 'unicode' if directunicode
% \@+Uni...-H: replaced by 'unicode' if directunicode*
% \w: '-w 1' if directunicode
% \@w: '-w 1' if directunicode*
\pxcz@mapentry{STD}{%
\Entry{mnr}{rml}           {H}                   {Switch}%
\Entry{mnr}{rmlv}          {V}                   {Switch,V}%
\Entry{gtu}{gbm}           {H}                   {Switch}%
\Entry{gtu}{gbmv}          {V}                   {Switch,V}%
}
\pxcz@mapentry{ALPHA}{%
\Entry{mnl}{r-cfjar-l-@PXcjk0@}{unicode}         {HWid}%
\Entry{mnr}{r-cfjar-r-@PXcjk0@}{unicode}         {HWid}%
\Entry{mnb}{r-cfjar-b-@PXcjk0@}{unicode}         {HWid}%
\Entry{gtr}{r-cfjas-r-@PXcjk0@}{unicode}         {HWid}%
\Entry{gtb}{r-cfjas-b-@PXcjk0@}{unicode}         {HWid}%
\Entry{gtx}{r-cfjas-x-@PXcjk0@}{unicode}         {HWid}%
\Entry{mgr}{r-cfjas-r-@PXcjk0@}{unicode}         {HWid}%
}
\pxcz@mapentry{UTF}{%
\Entry{mnr}{unijmin-h}     {UniJIS-UTF16-H}      {Uni*,Switch}%
\Entry{mnr}{unijmin-v}     {UniJIS-UTF16-V}      {Uni*,Switch,V}%
\Entry{mnr}{cidmin-h}      {Identity-H}          {AJ16}%
\Entry{mnr}{cidmin-v}      {Identity-V}          {AJ16,V}%
\Entry{mnr}{hmr}           {H}                   {Switch}%
\Entry{mnr}{hmrv}          {V}                   {Switch,V}%
\Entry{gtu}{unijgoth-h}    {UniJIS-UTF16-H}      {Uni*,Switch}%
\Entry{gtu}{unijgoth-v}    {UniJIS-UTF16-V}      {Uni*,Switch,V}%
\Entry{gtu}{cidgoth-h}     {Identity-H}          {AJ16}%
\Entry{gtu}{cidgoth-v}     {Identity-V}          {AJ16,V}%
\Entry{gtu}{hkb}           {H}                   {Switch}%
\Entry{gtu}{hkbv}          {V}                   {Switch,V}%
}
\pxcz@mapentry{OTF}{%
\Entry{mnl}{otf-ujml-h}    {UniJIS-UTF16-H}      {Uni,90}%
\Entry{mnl}{otf-ujml-v}    {UniJIS-UTF16-V}      {Uni,90,V}%
\Entry{mnl}{otf-cjml-h}    {Identity-H}          {AJ16}%
\Entry{mnl}{otf-cjml-v}    {Identity-V}          {AJ16,V}%
\Entry{mnl}{hminl-h}       {H}                   {90}%
\Entry{mnl}{hminl-v}       {V}                   {90,V}%
\Entry{mnl}{otf-ujmln-h}   {UniJIS2004-UTF16-H}  {Uni,04}%
\Entry{mnl}{otf-ujmln-v}   {UniJIS2004-UTF16-V}  {Uni,04,V}%
\Entry{mnl}{hminln-h}      {H}                   {}%
\Entry{mnl}{hminln-v}      {V}                   {V}%
\Entry{mnr}{otf-ujmr-h}    {UniJIS-UTF16-H}      {Uni,90}%
\Entry{mnr}{otf-ujmr-v}    {UniJIS-UTF16-V}      {Uni,90,V}%
\Entry{mnr}{otf-cjmr-h}    {Identity-H}          {AJ16}%
\Entry{mnr}{otf-cjmr-v}    {Identity-V}          {AJ16,V}%
\Entry{mnr}{hminr-h}       {H}                   {90}%
\Entry{mnr}{hminr-v}       {V}                   {90,V}%
\Entry{mnr}{otf-ujmrn-h}   {UniJIS2004-UTF16-H}  {Uni,04}%
\Entry{mnr}{otf-ujmrn-v}   {UniJIS2004-UTF16-V}  {Uni,04,V}%
\Entry{mnr}{hminrn-h}      {H}                   {}%
\Entry{mnr}{hminrn-v}      {V}                   {V}%
\Entry{mnb}{otf-ujmb-h}    {UniJIS-UTF16-H}      {Uni,90}%
\Entry{mnb}{otf-ujmb-v}    {UniJIS-UTF16-V}      {Uni,90,V}%
\Entry{mnb}{otf-cjmb-h}    {Identity-H}          {AJ16}%
\Entry{mnb}{otf-cjmb-v}    {Identity-V}          {AJ16,V}%
\Entry{mnb}{hminb-h}       {H}                   {90}%
\Entry{mnb}{hminb-v}       {V}                   {90,V}%
\Entry{mnb}{otf-ujmbn-h}   {UniJIS2004-UTF16-H}  {Uni,04}%
\Entry{mnb}{otf-ujmbn-v}   {UniJIS2004-UTF16-V}  {Uni,04,V}%
\Entry{mnb}{hminbn-h}      {H}                   {}%
\Entry{mnb}{hminbn-v}      {V}                   {V}%
\Entry{gtr}{otf-ujgr-h}    {UniJIS-UTF16-H}      {Uni,90}%
\Entry{gtr}{otf-ujgr-v}    {UniJIS-UTF16-V}      {Uni,90,V}%
\Entry{gtr}{otf-cjgr-h}    {Identity-H}          {AJ16}%
\Entry{gtr}{otf-cjgr-v}    {Identity-V}          {AJ16,V}%
\Entry{gtr}{hgothr-h}      {H}                   {90}%
\Entry{gtr}{hgothr-v}      {V}                   {90,V}%
\Entry{gtr}{otf-ujgrn-h}   {UniJIS2004-UTF16-H}  {Uni,04}%
\Entry{gtr}{otf-ujgrn-v}   {UniJIS2004-UTF16-V}  {Uni,04,V}%
\Entry{gtr}{hgothrn-h}     {H}                   {}%
\Entry{gtr}{hgothrn-v}     {V}                   {V}%
\Entry{gtb}{otf-ujgb-h}    {UniJIS-UTF16-H}      {Uni,90}%
\Entry{gtb}{otf-ujgb-v}    {UniJIS-UTF16-V}      {Uni,90,V}%
\Entry{gtb}{otf-cjgb-h}    {Identity-H}          {AJ16}%
\Entry{gtb}{otf-cjgb-v}    {Identity-V}          {AJ16,V}%
\Entry{gtb}{hgothb-h}      {H}                   {90}%
\Entry{gtb}{hgothb-v}      {V}                   {90,V}%
\Entry{gtb}{otf-ujgbn-h}   {UniJIS2004-UTF16-H}  {Uni,04}%
\Entry{gtb}{otf-ujgbn-v}   {UniJIS2004-UTF16-V}  {Uni,04,V}%
\Entry{gtb}{hgothbn-h}     {H}                   {}%
\Entry{gtb}{hgothbn-v}     {V}                   {V}%
\Entry{gtx}{otf-ujge-h}    {UniJIS-UTF16-H}      {Uni,90}%
\Entry{gtx}{otf-ujge-v}    {UniJIS-UTF16-V}      {Uni,90,V}%
\Entry{gtx}{otf-cjge-h}    {Identity-H}          {AJ16}%
\Entry{gtx}{otf-cjge-v}    {Identity-V}          {AJ16,V}%
\Entry{gtx}{hgotheb-h}     {H}                   {90}%
\Entry{gtx}{hgotheb-v}     {V}                   {90,V}%
\Entry{gtx}{otf-ujgen-h}   {UniJIS2004-UTF16-H}  {Uni,04}%
\Entry{gtx}{otf-ujgen-v}   {UniJIS2004-UTF16-V}  {Uni,04,V}%
\Entry{gtx}{hgothebn-h}    {H}                   {}%
\Entry{gtx}{hgothebn-v}    {V}                   {V}%
\Entry{mgr}{otf-ujmgr-h}   {UniJIS-UTF16-H}      {Uni,90}%
\Entry{mgr}{otf-ujmgr-v}   {UniJIS-UTF16-V}      {Uni,90,V}%
\Entry{mgr}{otf-cjmgr-h}   {Identity-H}          {AJ16}%
\Entry{mgr}{otf-cjmgr-v}   {Identity-V}          {AJ16,V}%
\Entry{mgr}{hmgothr-h}     {H}                   {90}%
\Entry{mgr}{hmgothr-v}     {V}                   {90,V}%
\Entry{mgr}{otf-ujmgrn-h}  {UniJIS2004-UTF16-H}  {Uni,04}%
\Entry{mgr}{otf-ujmgrn-v}  {UniJIS2004-UTF16-V}  {Uni,04,V}%
\Entry{mgr}{hmgothrn-h}    {H}                   {}%
\Entry{mgr}{hmgothrn-v}    {V}                   {V}%
%
\ifpxcz@otf@multi
\Entry{kom}{otf-ukmr-h}    {UniKS-UTF16-H}       {Uni}%
\Entry{kom}{otf-ukmr-v}    {UniKS-UTF16-V}       {Uni,V}%
\Entry{kom}{otf-ckmr-h}    {Identity-H}          {AK12}%
\Entry{kom}{otf-ckmr-v}    {Identity-V}          {AK12,V}%
\Entry{kog}{otf-ukgr-h}    {UniKS-UTF16-H}       {Uni}%
\Entry{kog}{otf-ukgr-v}    {UniKS-UTF16-V}       {Uni,V}%
\Entry{kog}{otf-ckgr-h}    {Identity-H}          {AK12}%
\Entry{kog}{otf-ckgr-v}    {Identity-V}          {AK12,V}%
\Entry{scm}{otf-ucmr-h}    {UniGB-UTF16-H}       {Uni}%
\Entry{scm}{otf-ucmr-v}    {UniGB-UTF16-V}       {Uni,V}%
\Entry{scm}{otf-ccmr-h}    {Identity-H}          {AG14}%
\Entry{scm}{otf-ccmr-v}    {Identity-V}          {AG14,V}%
\Entry{scg}{otf-ucgr-h}    {UniGB-UTF16-H}       {Uni}%
\Entry{scg}{otf-ucgr-v}    {UniGB-UTF16-V}       {Uni,V}%
\Entry{scg}{otf-ccgr-h}    {Identity-H}          {AG14}%
\Entry{scg}{otf-ccgr-v}    {Identity-V}          {AG14,V}%
\Entry{tcm}{otf-utmr-h}    {UniCNS-UTF16-H}      {Uni}%
\Entry{tcm}{otf-utmr-v}    {UniCNS-UTF16-V}      {Uni,V}%
\Entry{tcm}{otf-ctmr-h}    {Identity-H}          {AC14}%
\Entry{tcm}{otf-ctmr-v}    {Identity-V}          {AC14,V}%
\Entry{tcg}{otf-utgr-h}    {UniCNS-UTF16-H}      {Uni}%
\Entry{tcg}{otf-utgr-v}    {UniCNS-UTF16-V}      {Uni,V}%
\Entry{tcg}{otf-ctgr-h}    {Identity-H}          {AC14}%
\Entry{tcg}{otf-ctgr-v}    {Identity-V}          {AC14,V}%
\fi
}
\pxcz@mapentry{UPSTD}{%
\Entry{mnr}{uprml-h}       {UniJIS-UTF16-H}      {Uni*,Switch}%
\Entry{mnr}{uprml-v}       {UniJIS-UTF16-V}      {Uni*,Switch,V}%
\Entry{mnr}{uprml-hq}      {UniJIS-UCS2-H}       {Uni*,FWid}%
\Entry{gtu}{upgbm-h}       {UniJIS-UTF16-H}      {Uni*,Switch}%
\Entry{gtu}{upgbm-v}       {UniJIS-UTF16-V}      {Uni*,Switch,V}%
\Entry{gtu}{upgbm-hq}      {UniJIS-UCS2-H}       {Uni*,FWid}%
\Entry{mnr}{urml}          {UniJIS-UTF16-H}      {Uni*,Switch}%
\Entry{mnr}{urmlv}         {UniJIS-UTF16-V}      {Uni*,Switch,V}%
\Entry{gtu}{ugbm}          {UniJIS-UTF16-H}      {Uni*,Switch}%
\Entry{gtu}{ugbmv}         {UniJIS-UTF16-V}      {Uni*,Switch,V}%
%
\Entry{kom}{uphysmjm-h}    {UniKS-UTF16-H}       {Uni*}%
\Entry{kom}{uphysmjm-v}    {UniKS-UTF16-V}       {Uni*,V}%
\Entry{kog}{uphygt-h}      {UniKS-UTF16-H}       {Uni*}%
\Entry{kog}{uphygt-v}      {UniKS-UTF16-V}       {Uni*,V}%
\Entry{scm}{upstsl-h}      {UniGB-UTF16-H}       {Uni*}%
\Entry{scm}{upstsl-v}      {UniGB-UTF16-V}       {Uni*,V}%
\Entry{scg}{upstht-h}      {UniGB-UTF16-H}       {Uni*}%
\Entry{scg}{upstht-v}      {UniGB-UTF16-V}       {Uni*,V}%
\Entry{tcm}{upmsl-h}       {UniCNS-UTF16-H}      {Uni*}%
\Entry{tcm}{upmsl-v}       {UniCNS-UTF16-V}      {Uni*,V}%
\Entry{tcg}{upmhm-h}       {UniCNS-UTF16-H}      {Uni*}%
\Entry{tcg}{upmhm-v}       {UniCNS-UTF16-V}      {Uni*,V}%
}
\pxcz@mapentry{UPOTF}{%
\Entry{mnl}{uphminl-h}     {UniJIS-UTF16-H}      {Uni*,90}%
\Entry{mnl}{uphminl-v}     {UniJIS-UTF16-V}      {Uni*,90,V}%
\Entry{mnl}{uphminln-h}    {UniJIS2004-UTF16-H}  {Uni*,04}%
\Entry{mnl}{uphminln-v}    {UniJIS2004-UTF16-V}  {Uni*,04,V}%
\Entry{mnr}{uphminr-h}     {UniJIS-UTF16-H}      {Uni*,90}%
\Entry{mnr}{uphminr-v}     {UniJIS-UTF16-V}      {Uni*,90,V}%
\Entry{mnr}{uphminrn-h}    {UniJIS2004-UTF16-H}  {Uni*,04}%
\Entry{mnr}{uphminrn-v}    {UniJIS2004-UTF16-V}  {Uni*,04,V}%
\Entry{mnb}{uphminb-h}     {UniJIS-UTF16-H}      {Uni*,90}%
\Entry{mnb}{uphminb-v}     {UniJIS-UTF16-V}      {Uni*,90,V}%
\Entry{mnb}{uphminbn-h}    {UniJIS2004-UTF16-H}  {Uni*,04}%
\Entry{mnb}{uphminbn-v}    {UniJIS2004-UTF16-V}  {Uni*,04,V}%
\Entry{gtr}{uphgothr-h}    {UniJIS-UTF16-H}      {Uni*,90}%
\Entry{gtr}{uphgothr-v}    {UniJIS-UTF16-V}      {Uni*,90,V}%
\Entry{gtr}{uphgothrn-h}   {UniJIS2004-UTF16-H}  {Uni*,04}%
\Entry{gtr}{uphgothrn-v}   {UniJIS2004-UTF16-V}  {Uni*,04,V}%
\Entry{gtb}{uphgothb-h}    {UniJIS-UTF16-H}      {Uni*,90}%
\Entry{gtb}{uphgothb-v}    {UniJIS-UTF16-V}      {Uni*,90,V}%
\Entry{gtb}{uphgothbn-h}   {UniJIS2004-UTF16-H}  {Uni*,04}%
\Entry{gtb}{uphgothbn-v}   {UniJIS2004-UTF16-V}  {Uni*,04,V}%
\Entry{gtx}{uphgotheb-h}   {UniJIS-UTF16-H}      {Uni*,90}%
\Entry{gtx}{uphgotheb-v}   {UniJIS-UTF16-V}      {Uni*,90,V}%
\Entry{gtx}{uphgothebn-h}  {UniJIS2004-UTF16-H}  {Uni*,04}%
\Entry{gtx}{uphgothebn-v}  {UniJIS2004-UTF16-V}  {Uni*,04,V}%
\Entry{mgr}{uphmgothr-h}   {UniJIS-UTF16-H}      {Uni*,90}%
\Entry{mgr}{uphmgothr-v}   {UniJIS-UTF16-V}      {Uni*,90,V}%
\Entry{mgr}{uphmgothrn-h}  {UniJIS2004-UTF16-H}  {Uni*,04}%
\Entry{mgr}{uphmgothrn-v}  {UniJIS2004-UTF16-V}  {Uni*,04,V}%
}
\pxcz@mapentry{PXOTF}{%
}

% user-defined map
\pxcz@mapentry{USR}{%
  \pxcz@user@map
}

%--------------------------------------- '\diruni'

%% variables
\newif\ifpxcz@diruni@ok
\let\pxcz@otf@weight\relax

%% check if \diruni is available
\ifpxcz@uptex
  \@ifpackageloaded{otf}{% directunicode needs otf
    \ifnum\pxcz@directunicode>\z@ \pxcz@diruni@oktrue \fi
  }{%else
    \ifnum\pxcz@directunicode<\pxcz@directunicode@all\else
      \pxcz@diruni@oktrue % directunicode* does not need otf
      \AtBeginDocument{% to laod otf later causes inconsistency
        \@ifpackageloaded{otf}{\pxcz@diruni@okfalse}{}}%
    \fi
  }
\fi

%%<*> \diruni
\DeclareRobustCommand*{\diruni}{%
  \not@math@alphabet\diruni\relax
  \fontshape{diruni}\selectfont
}

%%<*> \textdiruni{<text>}
\newcommand*{\textdiruni}[1]{%
  \relax\ifmmode\hbox\fi{\diruni#1}%
}

\ifpxcz@diruni@ok   %---- <*diruni-ok>

%% \pxcz@otf@weight: otf weight mode
% watch out for priority...
\@ifpackagewith{otf}{deluxe}{%
  \let\pxcz@otf@weight=d
}{\@ifpackagewith{otf}{bold}{%
  \let\pxcz@otf@weight=b
}{\@ifpackagewith{otf}{noreplace}{%
  \let\pxcz@otf@weight=n
}{\@ifpackageloaded{otf}{%
  \let\pxcz@otf@weight=r
}{%else
  \let\pxcz@otf@weight=n
}}}}
%% \pxcz@otf@mmivjis: otf jis2004
\@ifpackagewith{otf}{jis2004}{%
  \let\pxcz@otf@mmivjis=t%
}{%else
  \let\pxcz@otf@mmivjis=f%
}
%% \pxcz@du@scale
\let\pxcz@du@scale\utf@sc@le
\ifx\pxcz@du@scale\@undefined
  \let\pxcz@du@scale\Cjascale
\fi
\ifx\pxcz@du@scale\@undefined
  \edef\pxcz@du@scale{\ifx\jsc@JYn\@undefined 0.962216\else 0.924715\fi}%
\fi

%% \pxcz@du@decl@shape{<fam>}{<ser>}{<font>}
\@onlypreamble\pxcz@du@decl@shape
\def\pxcz@du@decl@shape#1#2#3#4#5{%
\DeclareFontShape{JY2}{#1}{#2}{diruni}{<->%
    \pxcz@du@shape@spec{#3}{#4}{#5}{h}}{}%
\DeclareFontShape{JT2}{#1}{#2}{diruni}{<->%
    \pxcz@du@shape@spec{#3}{#4}{#5}{v}}{}}
\@onlypreamble\pxcz@du@shape@spec
\def\pxcz@du@shape@spec#1#2#3#4{%
  \if#1t%
    s*[\pxcz@du@scale]#2\if t\pxcz@otf@mmivjis#3\fi-#4%
  \else#2\fi}

\if d\pxcz@otf@weight % deluxe
\pxcz@du@decl@shape{hmc}{l}t{otf-ujml}{n}%
\pxcz@du@decl@shape{hmc}{m}t{otf-ujmr}{n}%
\pxcz@du@decl@shape{hmc}{bx}t{otf-ujmb}{n}%
\pxcz@du@decl@shape{hgt}{m}t{otf-ujgr}{n}%
\pxcz@du@decl@shape{hgt}{bx}t{otf-ujgb}{n}%
\pxcz@du@decl@shape{hgt}{eb}t{otf-ujge}{n}%
\pxcz@du@decl@shape{mg}{m}t{otf-ujmgr}{n}%
\else\if b\pxcz@otf@weight % bold
\pxcz@du@decl@shape{hmc}{m}t{otf-ujmr}{n}%
\pxcz@du@decl@shape{hmc}{bx}f{ssub*hgt/m/diruni}{}%
\pxcz@du@decl@shape{hgt}{m}t{otf-ujgb}{n}%
\pxcz@du@decl@shape{hgt}{bx}f{ssub*hgt/m/diruni}{}%
\else\if r\pxcz@otf@weight % default
\pxcz@du@decl@shape{hmc}{m}t{otf-ujmr}{n}%
\pxcz@du@decl@shape{hmc}{bx}f{ssub*hgt/m/diruni}{}%
\pxcz@du@decl@shape{hgt}{m}t{otf-ujgr}{n}%
\pxcz@du@decl@shape{hgt}{bx}f{ssub*hgt/m/diruni}{}%
\else                 % noreplace
\ifnum\pxcz@directunicode>\@ne % (directunicode*)
\pxcz@du@decl@shape{mc}{m}t{uprml}{}%
\pxcz@du@decl@shape{mc}{bx}f{ssub*gt/m/diruni}{}%
\pxcz@du@decl@shape{gt}{m}t{upgbm}{}%
\pxcz@du@decl@shape{gt}{bx}f{ssub*gt/m/diruni}{}%
\else                          % (directunicode)
\pxcz@du@decl@shape{mc}{m}t{otf-ujmr}{n}%
\pxcz@du@decl@shape{mc}{bx}f{ssub*gt/m/diruni}{}%
\pxcz@du@decl@shape{gt}{m}t{otf-ujgr}{n}%
\pxcz@du@decl@shape{gt}{bx}f{ssub*gt/m/diruni}{}%
\fi
\fi\fi\fi

\AtBeginDocument{%
  \def\pxcz@do#1#2#3{%
    \DeclareFontShape{#1}{#2}{#3}{diruni}{<->ssub*#2/#3/n}{}}%
  \@for\pxcz@tmpa:={\rmdefault,\sfdefault,\ttdefault}\do{%
    \pxcz@force@load@font@fam\pxcz@tmpa
    \@for\pxcz@tmpb:={m,bx}\do{%
      \edef\pxcz@tmpb{{\f@encoding}{\pxcz@tmpa}{\pxcz@tmpb}}%
      \expandafter\pxcz@do\pxcz@tmpb}}%
}
\@onlypreamble\pxcz@force@load@font@fam
\def\pxcz@force@load@font@fam#1{%
  \begingroup
    \edef\f@family{#1}\def\f@series{m}\def\f@shape{n}%
    \xdef\font@name{\csname\curr@fontshape/\f@size\endcsname}%
    \let\extract@font\relax
    \pickup@font
  \endgroup
}

\fi                 %---- </diruni-ok>

%% \pxcz@err@diruni
\ifcase\pxcz@directunicode
  \def\pxcz@errhelp@diruni{%
    You must use upLaTeX and load pxchfon with 'directunicode(*)' option.}
\else
  \def\pxcz@errhelp@diruni{%
    You must use upLaTeX and load pxchfon after 'otf' package.}
\fi
\def\pxcz@err@diruni{%
  \pxcz@error{Command '\string\diruni' not available}%
   {\pxcz@errhelp@diruni\MessageBreak\@ehc}%
  \global\let\pxcz@err@diruni\relax}
\AtBeginDocument{%
  \ifpxcz@diruni@ok
    \let\pxcz@err@diruni\relax
    \let\pxcz@errhelp@diruni\relax
  \else
    \let\diruni\pxcz@err@diruni
  \fi}

%--------------------------------------- 'alphabet' option

%% \pxcz@decl@shape{<fam>}{<ser>}{<font>}
\@onlypreamble\pxcz@decl@shape
\def\pxcz@decl@shape#1#2#3{%
\DeclareFontShape{OT1}{#1}{#2}{n}{<->#3}{}%
\DeclareFontShape{OT1}{#1}{#2}{it}{<->ssub*#1/#2/n}{}}

\let\pxcz@check@extra\@empty
\@onlypreamble\pxcz@check@extra
%
\ifpxcz@alphafont   %---- <*alphabet>
\ifpxcz@otf@deluxe  %---- <*otfdx> : otf with deluxe option
  % define families cfjar & cfjas
\DeclareFontFamily{OT1}{cfjar}{}%
\pxcz@decl@shape{cfjar}{l}{cfjar-l-l0j}%
\pxcz@decl@shape{cfjar}{m}{cfjar-r-l0j}%
\pxcz@decl@shape{cfjar}{bx}{cfjar-b-l0j}%
\DeclareFontFamily{OT1}{cfjas}{}%
\pxcz@decl@shape{cfjas}{m}{cfjas-r-l0j}%
\pxcz@decl@shape{cfjas}{bx}{cfjas-b-l0j}%
\pxcz@decl@shape{cfjas}{eb}{cfjas-x-l0j}%
  % redefine \ltseries & \ebseries so they affect roman font
\let\ltseries\relax \let\ebseries\relax
\DeclareRobustCommand\ltseries{%
  \not@math@alphabet\ltseries\relax
  \fontseries\ltdefault\selectfont}%
\DeclareRobustCommand\ebseries{%
  \not@math@alphabet\ebseries\relax
  \fontseries\ebdefault\selectfont}%
\else               %---- <*!otfdx>
\DeclareFontFamily{OT1}{cfjar}{}%
\pxcz@decl@shape{cfjar}{m}{cfjar-r-l0j}%
\pxcz@decl@shape{cfjar}{bx}{ssub*cfjas/m/n}%
\DeclareFontFamily{OT1}{cfjas}{}%
\pxcz@decl@shape{cfjas}{m}{cfjas-r-l0j}%
\pxcz@decl@shape{cfjas}{bx}{ssub*cfjas/m/n}%
\@onlypreamble\pxcz@err@dxotf
\def\pxcz@err@dxotf#1{%
  \pxcz@error{Loaded before '#1' with 'deluxe'}%
  {This package must be loaded after '#1' with 'deluxe' option
  when using both.}}
\def\pxcz@check@extra{%
  \expandafter\let\expandafter\pxcz@x\csname pxcz@FS/mnr\endcsname
  \ifx\pxcz@x\@empty\else
    % if mnr is replaced but gtr is not then ...
    \expandafter\ifx\csname pxcz@FS/gtr\endcsname\@empty
      {\expandafter\let\csname pxcz@FS/gtr\endcsname\pxcz@x
        \relax\relax}%
  \fi\fi
  \@ifpackagewith{otf}{deluxe}{\pxcz@err@dxotf{otf}}{}%
  \@ifpackagewith{pxotf}{deluxe}{\pxcz@err@dxotf{pxotf}}{}%
}
\fi                 %---- </otfdx>
\fi                 %---- </alphabet>

%--------------------------------------- begin-document hook

%% \pxcz@set@page@hook{<text>}
\@onlypreamble\pxcz@set@page@hook
\ifpxcz@everypage
\def\pxcz@set@page@hook#1{%
  \AtBeginShipout{\setbox\AtBeginShipoutBox=\vbox{%
     \baselineskip\z@skip\lineskip\z@skip\lineskiplimit\z@
     #1\copy\AtBeginShipoutBox}}}
\else
\def\pxcz@set@page@hook#1{%
  % this is \AtBeginDvi with forcing of yoko-dir added
  \global\setbox\@begindvibox\vbox{\yoko\unvbox\@begindvibox#1}}
\fi

%% the begin-document hook
\@onlypreamble\pxcz@check@alldefined
\def\pxcz@check@alldefined#1{%
  \pxcz@oktrue
  \@for\pxcz@x:={#1}\do{%
    \expandafter\ifx\csname pxcz@FS/\pxcz@x\endcsname\@empty
      \pxcz@okfalse \fi}}
\AtBeginDocument{%
  \pxcz@user@hook
  \ifx\pxcz@file@preset\relax\else
    \pxcz@do@file@preset
  \fi
  \ifpxcz@alpha
    \pxcz@check@alldefined{mnl,mnr,mnb}%
    \ifpxcz@ok \renewcommand\rmdefault{cfjar}\fi
    \pxcz@check@alldefined{gtr,gtb,gtx}%
    \ifpxcz@ok \renewcommand\sfdefault{cfjas}\fi
    \edef\pxcz@tmpa{\encodingdefault}\def\pxcz@tmpb{OT1}
    \ifx\pxcz@tmpa\pxcz@tmpb\else
      \pxcz@warn{Default encoding is changed to 'OT1' because%
        \MessageBreak'alphabet' option is in effect}%
    \fi
    \renewcommand\encodingdefault{OT1}\normalfont
    \pxcz@addtospec{ALPHA}%
  \fi
  \ifpxcz@rel
    \pxcz@check@alldefined{mnl,mnr,mnb}%
    \ifpxcz@ok \pxcz@decl@relfont\mcdefault{cfjar}{l}\fi
    \pxcz@check@alldefined{gtr,gtb,gtx}%
    \ifpxcz@ok \pxcz@decl@relfont\gtdefault{cfjas}{eb}\fi
    \pxcz@addtospec{ALPHA}%
  \fi
  \ifpxcz@uptex \pxcz@addtospec{UPSTD}%
  \else         \pxcz@addtospec{STD}%
  \fi
  \ifpxcz@otf
    \@ifpackageloaded{otf}{\pxcz@otftrue}{\pxcz@otffalse}%
    \@ifpackageloaded{utf}{\pxcz@utftrue}{\pxcz@utffalse}%
  \fi
  \ifpxcz@otf
    \ifpxcz@uptex \pxcz@addtospec{UPOTF}\fi
    \pxcz@addtospec{OTF}%
  \fi
  \ifpxcz@utf \pxcz@addtospec{UTF}%
  \fi
  \@ifpackageloaded{pxotf}{\pxcz@oktrue}{\pxcz@okfalse}%
  \@ifpackageloaded{pxfontenc}{\pxcz@oktrue}{}%
  \ifpxcz@ok \pxcz@addtospec{PXOTF}%
  \fi
  \pxcz@check@extra
  \pxcz@addtospec{USR}%
  \ifpxcz@enabled
    \pxcz@set@page@hook{\pxcz@spec}%
  \else\ifx\pxcz@spec\@empty\else
    \PackageWarningNoLine\pxcz@pkgname
     {Font mapping is disabled, since the driver in use\MessageBreak
      is not dvipdfmx}%
  \fi\fi
  \ifpxcz@dumpmap
    \pxcz@do@dumpmap
  \fi
  \ifpxcz@dumpmap@tl
    \pxcz@do@dumpmap@tl
  \fi
}

%% \pxcz@decl@relfont
\@onlypreamble\pxcz@decl@relfont
\def\pxcz@decl@relfont#1#2#3{%
  \DeclareRelationFont{\k@encoding}{#1}{m}{}{OT1}{#2}{m}{}%
  \DeclareRelationFont{\k@encoding}{#1}{bx}{}{OT1}{#2}{bx}{}%
  \ifpxcz@otf@deluxe
    \DeclareRelationFont{\k@encoding}{#1}{#3}{}{OT1}{#2}{#3}{}%
  \fi
  \pxcz@info{Relation font set for \k@encoding/#1}%
}

%--------------------------------------- dump font map
% if some dumpmap is enabled...
\ifnum 0\ifpxcz@dumpmap 1\fi
        \ifpxcz@dumpmap@tl 1\fi >\z@

%% variables
\let\pxcz@dump@text\relax
\let\pxcz@spec@save\relax
\newwrite\pxcz@fout

%% \pxcz@add@to@dump@text
\def\pxcz@add@to@dump@text#1{%
  \edef\pxcz@dump@text{\pxcz@dump@text#1}}

%% \pxcz@dump@special{<string>}
\@onlypreamble\pxcz@dump@special
\def\pxcz@dump@special#1{%
  \pxcz@dump@special@a#1\bxcz@end}
\@onlypreamble\pxcz@dump@special@a
\def\pxcz@dump@special@a#1 #2\bxcz@end{%
  \@nameuse{pxcz@dump@special@#1}\@gobble{#2}}
\@namedef{pxcz@dump@special@pdf:mapline}#1#2{%
  \pxcz@add@to@dump@text{#2^^J}}

%% \pxcz@dump@spec@to{<file-name>}
\@onlypreamble\pxcz@dump@spec@to
\def\pxcz@dump@spec@to#1{%
  \def\pxcz@dump@text{\@percentchar\space#1^^J}%
  \let\special\pxcz@dump@special
  \pxcz@spec \let\special\relax
  \pxcz@add@to@dump@text{\@percentchar\space EOF}%
  \immediate\openout\pxcz@fout=#1\relax
  \immediate\write\pxcz@fout{\pxcz@dump@text}%
  \immediate\closeout\pxcz@fout}

%% \pxcz@do@dumpmap
\@onlypreamble\pxcz@do@dumpmap
\def\pxcz@do@dumpmap{%
  \begingroup
    \pxcz@dump@spec@to{\jobname.map}%
  \endgroup}

%% \pxcz@do@dumpmap@tl
\@onlypreamble\pxcz@do@dumpmap@tl
\def\pxcz@do@dumpmap@tl{%
  \begingroup
    \let\pxcz@spec@save\pxcz@spec
    \pxcz@do@dumpmap@tl@a{STD}{ptex-\jobname}%
    \pxcz@do@dumpmap@tl@a{UPSTD}{uptex-\jobname}%
    \pxcz@do@dumpmap@tl@a{OTF}{otf-\jobname}%
    \pxcz@do@dumpmap@tl@a{UPOTF}{otf-up-\jobname}%
    \global\let\pxcz@spec\pxcz@spec@save
  \endgroup}
\@onlypreamble\pxcz@do@dumpmap@tl@a
\def\pxcz@do@dumpmap@tl@a#1#2{%
  \global\let\pxcz@spec\@empty
  \pxcz@addtospec{#1}%
  \pxcz@dump@spec@to{#2.map}}

\fi
%--------------------------------------- preset japanese font mappings

%% \pxcz@declare@preset{<name>}{<text>}
\@onlypreamble\pxcz@declare@preset
\def\pxcz@declare@preset#1{%
  \expandafter\pxcz@decl@preset@a\csname pxcz@the@preset@#1\endcsname}
\def\pxcz@decl@preset@a#1{\@onlypreamble#1\def#1}

%% \pxcz@declare@preset@alias{<name1>}{<name2>}
\@onlypreamble\pxcz@declare@preset@alias
\def\pxcz@declare@preset@alias#1#2{%
  \expandafter\pxcz@decl@preset@alias@a\csname pxcz@the@preset@#1%
  \expandafter\endcsname\csname pxcz@the@preset@#2\endcsname}
\def\pxcz@decl@preset@alias@a#1#2{\@onlypreamble#1\let#1#2}

%% \pxcz@declare@depre@preset
\@onlypreamble\pxcz@declare@depre@preset
\def\pxcz@declare@depre@preset#1{%
  \pxcz@declare@deprecated{#1}%
  \pxcz@declare@preset{#1}}
%% \pxcz@declare@depre@preset@alias
\@onlypreamble\pxcz@declare@depre@preset@alias
\def\pxcz@declare@depre@preset@alias#1{%
  \pxcz@declare@deprecated{#1}%
  \pxcz@declare@preset@alias{#1}}
%% \pxcz@declare@deprecated{<name>}
\def\pxcz@declare@deprecated#1{%
  \expandafter\let\csname pxcz@depre@preset@#1\endcsname=t}

%% \pxcz@uniweight{<font-mn>}{<font-gt>}
\@onlypreamble\pxcz@uniweight
\def\pxcz@uniweight#1#2{%
  \setminchofont{#1}\setgothicfont{#2}\setmarugothicfont{#2}}

%% \pxcz@multiweight{<font-mnl>}{<font-mnr>}{<font-mnb>}
%%   {<font-gtr>}{<font-gtb>}{<font-gtx>}{<font-gtu>}{<font-mgr>}
\@onlypreamble\pxcz@multiweight
\def\pxcz@multiweight#1#2#3#4#5#6#7#8{%
  \setminchofont{#2}\setgothicfont{#7}\setmarugothicfont{#8}%
  \ifpxcz@oneweight\else
  \setlightminchofont{#1}\setboldminchofont{#3}%
  \setmediumgothicfont{#4}\setboldgothicfont{#5}\setxboldgothicfont{#6}%
  \fi}

%% \pxcz@use@preset{<name>}
\def\pxcz@use@preset#1{%
  \expandafter\ifx\csname pxcz@depre@preset@#1\endcsname t%
    \pxcz@error{The old preset '#1' is *abolished*}
      {\@ehc}%
  \fi
  \csname pxcz@the@preset@#1\endcsname}

%% definitions of main preset mappings
\pxcz@declare@preset{noembed}{%
  \pxcz@uniweight{*}{*}}
%(uniweight)
\pxcz@declare@preset{ms}{%
  \pxcz@uniweight{:0:msmincho.ttc}{:0:msgothic.ttc}}
\pxcz@declare@preset{ipa}{%
  \pxcz@uniweight{ipam.ttf}{ipag.ttf}}
\pxcz@declare@preset{ipaex}{%
  \pxcz@uniweight{ipaexm.ttf}{ipaexg.ttf}}
%(multiweight)
\pxcz@declare@preset{ms-hg}{%
  \pxcz@multiweight{:0:msmincho.ttc}{:0:msmincho.ttc}{:0:hgrme.ttc}%
  {:0:hgrgm.ttc}{:0:hgrge.ttc}{:0:hgrsgu.ttc}{:0:msgothic.ttc}{hgrsmp.ttf}}
\pxcz@declare@preset{ipa-hg}{%
  \pxcz@multiweight{ipam.ttf}{ipam.ttf}{:0:hgrme.ttc}%
  {:0:hgrgm.ttc}{:0:hgrge.ttc}{:0:hgrsgu.ttc}{ipag.ttf}{hgrsmp.ttf}}
\pxcz@declare@preset{ipaex-hg}{%
  \pxcz@multiweight{ipaexm.ttf}{ipaexm.ttf}{:0:hgrme.ttc}%
  {:0:hgrgm.ttc}{:0:hgrge.ttc}{:0:hgrsgu.ttc}{ipaexg.ttf}{hgrsmp.ttf}}
\pxcz@declare@preset{moga-mobo}{%
  \pxcz@multiweight{:0:mogam.ttc}{:0:mogam.ttc}{:0:mogamb.ttc}%
  {:0:mogag.ttc}{:0:mogagb.ttc}{:0:mogagb.ttc}{:0:mogag.ttc}{:0:mobog.ttc}}
\pxcz@declare@preset{moga-mobo-ex}{%
  \pxcz@multiweight{:1:mogam.ttc}{:1:mogam.ttc}{:1:mogamb.ttc}%
  {:1:mogag.ttc}{:1:mogagb.ttc}{:1:mogagb.ttc}{:1:mogag.ttc}{:1:mobog.ttc}}
\pxcz@declare@preset{moga-maruberi}{%
  \pxcz@multiweight{:0:mogam.ttc}{:0:mogam.ttc}{:0:mogamb.ttc}%
  {:0:mogag.ttc}{:0:mogagb.ttc}{:0:mogagb.ttc}{:0:mogag.ttc}{MTLmr3m.ttf}}
\pxcz@declare@preset{kozuka-pro}{%
  \usecmapforalphabet
  \pxcz@multiweight{KozMinPro-Light.otf}{KozMinPro-Regular.otf}%
   {KozMinPro-Bold.otf}{KozGoPro-Regular.otf}{KozGoPro-Bold.otf}%
   {KozGoPro-Heavy.otf}{KozGoPro-Medium.otf}{KozGoPro-Heavy.otf}}
\pxcz@declare@preset{kozuka-pr6}{%
  \usecmapforalphabet
  \pxcz@multiweight{KozMinProVI-Light.otf}{KozMinProVI-Regular.otf}%
   {KozMinProVI-Bold.otf}{KozGoProVI-Regular.otf}{KozGoProVI-Bold.otf}%
   {KozGoProVI-Heavy.otf}{KozGoProVI-Medium.otf}{KozGoProVI-Heavy.otf}}
\pxcz@declare@preset{kozuka-pr6n}{%
  \usecmapforalphabet
  \pxcz@multiweight{KozMinPr6N-Light.otf}{KozMinPr6N-Regular.otf}%
   {KozMinPr6N-Bold.otf}{KozGoPr6N-Regular.otf}{KozGoPr6N-Bold.otf}%
   {KozGoPr6N-Heavy.otf}{KozGoPr6N-Medium.otf}{KozGoPr6N-Heavy.otf}}
\pxcz@declare@preset{hiragino-pro}{%
  \usecmapforalphabet
  \pxcz@multiweight{HiraMinPro-W2.otf}{HiraMinPro-W3.otf}%
   {HiraMinPro-W6.otf}{HiraKakuPro-W3.otf}{HiraKakuPro-W6.otf}%
   {HiraKakuStd-W8.otf}{HiraKakuPro-W6.otf}{HiraMaruPro-W4.otf}}
\pxcz@declare@preset{hiragino-pron}{%
  \usecmapforalphabet
  \pxcz@multiweight{HiraMinProN-W2.otf}{HiraMinProN-W3.otf}%
   {HiraMinProN-W6.otf}{HiraKakuProN-W3.otf}{HiraKakuProN-W6.otf}%
   {HiraKakuStdN-W8.otf}{HiraKakuProN-W6.otf}{HiraMaruProN-W4.otf}}
\pxcz@declare@preset{hiragino-elcapitan-pro}{%
  \usecmapforalphabet
  \pxcz@multiweight{HiraMinPro-W2.otf}{:1:HiraginoSerif-W3.ttc}%
   {:1:HiraginoSerif-W6.ttc}{:3:HiraginoSans-W3.ttc}{:3:HiraginoSans-W6.ttc}%
   {:2:HiraginoSans-W8.ttc}{:3:HiraginoSans-W6.ttc}{:0:HiraginoSansR-W4.ttc}}
\pxcz@declare@preset{hiragino-elcapitan-pron}{%
  \usecmapforalphabet
  \pxcz@multiweight{HiraMinProN-W2.otf}{:0:HiraginoSerif-W3.ttc}%
   {:0:HiraginoSerif-W6.ttc}{:2:HiraginoSans-W3.ttc}{:2:HiraginoSans-W6.ttc}%
   {:3:HiraginoSans-W8.ttc}{:2:HiraginoSans-W6.ttc}{:1:HiraginoSansR-W4.ttc}}
\pxcz@declare@preset{morisawa-pro}{%
  \usecmapforalphabet
  \pxcz@multiweight{A-OTF-RyuminPro-Light.otf}{A-OTF-RyuminPro-Light.otf}%
   {A-OTF-FutoMinA101Pro-Bold.otf}{A-OTF-GothicBBBPro-Medium.otf}%
   {A-OTF-FutoGoB101Pro-Bold}{A-OTF-MidashiGoPro-MB31.otf}%
   {A-OTF-GothicBBBPro-Medium.otf}{A-OTFJun101Pro-Light.otf}}
\pxcz@declare@preset{morisawa-pr6n}{%
  \usecmapforalphabet
  \pxcz@multiweight{A-OTF-RyuminPr6N-Light.otf}{A-OTF-RyuminPr6N-Light.otf}%
   {A-OTF-FutoMinA101Pr6N-Bold.otf}{A-OTF-GothicBBBPr6N-Medium.otf}%
   {A-OTF-FutoGoB101Pr6N-Bold}{A-OTF-MidashiGoPr6N-MB31.otf}%
   {A-OTF-GothicBBBPr6N-Medium.otf}{A-OTFJun101Pr6N-Light.otf}}
\pxcz@declare@preset{yu-win}{%
  \pxcz@multiweight{yuminl.ttf}{yumin.ttf}%
   {yumindb.ttf}{yugothic.ttf}{yugothib.ttf}%
   {yugothib.ttf}{yugothic.ttf}{yugothic.ttf}}
\pxcz@declare@preset{yu-win10}{%
  \pxcz@multiweight{yuminl.ttf}{yumin.ttf}%
   {yumindb.ttf}{:0:YuGothR.ttc}{:0:YuGothB.ttc}%
   {:0:YuGothB.ttc}{:0:YuGothM.ttc}{:0:YuGothM.ttc}}
\pxcz@declare@preset{yu-win10+}{%
  \pxcz@switch@font@yuwinxtrue
  \pxcz@multiweight{yuminl.ttf}{yumin.ttf}%
   {yumindb.ttf}{:0:YuGothR.ttc}{:0:YuGothB.ttc}%
   {:0:YuGothB.ttc}{:0:YuGothM.ttc}{:0:YuGothM.ttc}}
\pxcz@declare@preset{yu-osx}{%
  \usecmapforalphabet
  \pxcz@multiweight{YuMin-Medium.otf}{YuMin-Medium.otf}%
   {YuMin-Demibold.otf}{YuGo-Medium.otf}{YuGo-Bold.otf}%
   {YuGo-Bold.otf}{YuGo-Medium.otf}{YuGo-Medium.otf}}
% Source Han Sans/Serif, "OTC"
\pxcz@declare@preset{sourcehan-otc}{%
  \pxcz@multiweight{:0:SourceHanSerif-Light.ttc}%
   {:0:SourceHanSerif-Regular.ttc}{:0:SourceHanSerif-Bold.ttc}%
   {:0:SourceHanSans-Regular.ttc}{:0:SourceHanSans-Bold.ttc}%
   {:0:SourceHanSans-Heavy.ttc}{:0:SourceHanSans-Medium.ttc}%
   {:0:SourceHanSans-Medium.ttc}}
% Source Han Sans/Serif, "Language-specific OTF"
\pxcz@declare@preset{sourcehan}{%
  \pxcz@multiweight{SourceHanSerif-Light.otf}%
   {SourceHanSerif-Regular.otf}{SourceHanSerif-Bold.otf}%
   {SourceHanSans-Regular.otf}{SourceHanSans-Bold.otf}%
   {SourceHanSans-Heavy.otf}{SourceHanSans-Medium.otf}%
   {SourceHanSans-Medium.otf}}
% Noto Sans/Serif CJK, "OpenType/CFF Collection (OTC)"
\pxcz@declare@preset{noto-otc}{%
  \pxcz@multiweight{:0:NotoSerifCJK-Light.ttc}%
   {:0:NotoSerifCJK-Regular.ttc}{:0:NotoSerifCJK-Bold.ttc}%
   {:0:NotoSansCJK-Regular.ttc}{:0:NotoSansCJK-Bold.ttc}%
   {:0:NotoSansCJK-Black.ttc}{:0:NotoSansCJK-Medium.ttc}%
   {:0:NotoSansCJK-Medium.ttc}}
% Noto Sans/Serif CJK, "Language-specific OpenType/CFF (OTF)"
\pxcz@declare@preset{noto}{%
  \pxcz@multiweight{NotoSerifCJKjp-Light.otf}%
   {NotoSerifCJKjp-Regular.otf}{NotoSerifCJKjp-Bold.otf}%
   {NotoSansCJKjp-Regular.otf}{NotoSansCJKjp-Bold.otf}%
   {NotoSansCJKjp-Black.otf}{NotoSansCJKjp-Medium.otf}%
   {NotoSansCJKjp-Medium.otf}}
%(obsolete)
\pxcz@declare@depre@preset{ipa-otf}{%
  \pxcz@uniweight{ipam.otf}{ipag.otf}}
\pxcz@declare@depre@preset{ipa-otf-dx}{%
  \pxcz@multiweight{ipam.otf}{:0:hgrme.ttc}%
  {:0:hgrgm.ttc}{:0:hgrge.ttc}{:0:hgrsgu.ttc}{hgrsmp.ttf}}
\pxcz@declare@depre@preset{kozuka4}{%
  \usecmapforalphabet
  \pxcz@uniweight{KozMinPro-Regular-Acro.otf}{KozGoPro-Medium-Acro.otf}}
\pxcz@declare@depre@preset{kozuka6}{%
  \usecmapforalphabet
  \pxcz@uniweight{KozMinProVI-Regular.otf}{KozGoProVI-Medium.otf}}
\pxcz@declare@depre@preset{kozuka6n}{%
  \usecmapforalphabet
  \pxcz@uniweight{KozMinPr6N-Regular.otf}{KozGoPr6N-Medium.otf}}
\pxcz@declare@depre@preset{hiragino}{%
  \usecmapforalphabet
  \pxcz@uniweight{HiraMinPro-W3.otf}{HiraKakuPro-W6.otf}}
%(alias)
\pxcz@declare@depre@preset@alias{ms-dx}{ms-hg}
\pxcz@declare@depre@preset@alias{ipa-ttf}{ipa}
\pxcz@declare@depre@preset@alias{ipa-ttf-dx}{ipa-hg}
\pxcz@declare@depre@preset@alias{ipav2}{ipa}
\pxcz@declare@depre@preset@alias{ipav2-dx}{ipa-hg}
\pxcz@declare@depre@preset@alias{ipa-dx}{ipa-hg}
\pxcz@declare@depre@preset@alias{hiragino-dx}{hiragino-pro}
\pxcz@declare@preset@alias{noEmbed}{noembed}
\pxcz@declare@preset@alias{kozuka}{kozuka-pro}
\pxcz@declare@preset@alias{hiragino-elcapitan}{hiragino-elcapitan-pro}
\pxcz@declare@preset@alias{morisawa}{morisawa-pro}

%% ... and invokes the specified one!
\if\pxcz@main@preset\relax\else
\pxcz@use@preset{\pxcz@main@preset}
\fi

%--------------------------------------- all done
\endinput
%% EOF
